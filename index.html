<!DOCTYPE html>
<meta charset='UTF-8'>

<head>
  <link rel="stylesheet" href="reveal.js/dist/reset.css">
  <link rel="stylesheet" href="reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="reveal.js/dist/theme/black.css" id="theme">
  <link rel="stylesheet" href="highlightjs/dracula.css">
  <script src="reveal.js/dist/reveal.js"></script>
  <script src="reveal.js/plugin/markdown/markdown.js"></script>
  <script src="reveal.js/plugin/notes/notes.js"></script>
  <script src="reveal.js/plugin/highlight/highlight.js"></script>
  <script src="jquery/jquery.js"></script>
  <style>

    @import url('https://fonts.googleapis.com/css?family=Poppins');

    .reveal-viewport {
      /* background-color: #3a5663; */
      background-image: linear-gradient(to bottom right, #2b5970, #3d1347);
    }

    .pop {
      font-weight: 1000;
      color:#e3732a;
      -webkit-text-stroke: 1.5px black;
    }

    .reveal {
    font-family: "Poppins", "Source Sans Pro", Helvetica, sans-serif;
    font-size: 42px;
    font-weight: normal;
    color: #fff;
  }

    .reveal h1,
    .reveal h2,
    .reveal h3,
    .reveal h4,
    .reveal h5,
    .reveal h6 {
      margin: 0 0 20px 0;
      color: #fff;
      font-family: "Poppins" "Source Sans Pro", Helvetica, sans-serif;
      font-weight: 600;
      line-height: 1.2;
      letter-spacing: normal;
      text-transform: none;
      text-shadow: none;
      word-wrap: break-word; }

    .boo {
      width: 100px;
      height: 100px;
    }

    #year2020 {
      /* Start the shake animation and make the animation last for 0.5 seconds */
      animation: shake 0.5s alternate;

      /* When the animation is finished, start again */
      animation-iteration-count: infinite;
    }

    @keyframes shake {
      0% { transform: translate(1px, 1px) rotate(0deg); color: gray;}
      10% { transform: translate(-1px, -2px) rotate(-1deg); }
      20% { transform: translate(-3px, 0px) rotate(1deg); }
      30% { transform: translate(3px, 2px) rotate(0deg); }
      40% { transform: translate(1px, -1px) rotate(1deg); }
      50% { transform: translate(-1px, 2px) rotate(-1deg);}
      60% { transform: translate(-3px, 1px) rotate(0deg); }
      70% { transform: translate(3px, 1px) rotate(-1deg); }
      80% { transform: translate(-1px, -1px) rotate(1deg); }
      90% { transform: translate(1px, 2px) rotate(0deg); }
      100% { transform: translate(-3px, -5px) rotate(-2deg); color: red;}
    }

    @keyframes roll {
      0% {
        transform: rotate(0);
      }
      100% {
        transform: rotate(90);
      }
    }

    .headline {
      text-align: left;
      margin-bottom: 0px;
    }

    .subheadline {
      text-align: left;
      margin-top: 0px;
      margin-bottom: 0px;
      font-size: 80%;
    }

    .reveal code {
      font-family: "Fira Code", "Consolas";
    }

    .reveal .errcode {
      color: red !important;
    }

    #personnel-images {
      display: flex;           /* establish flex container */
      flex-direction: row;  /* stack flex items vertically */
      position: relative;
    }

    .personnel-image {
      height: 200px;
      margin-top: 0px !important;
      margin-bottom: 0px !important;
      /* flex-shrink: 3; */
    }

    .personnel-box {
      /* display: inline-block; */
      position: relative;
      text-align: center;
      align-content: center;
      margin-left: 20px;
      margin-right: 20px;
      align-items: center;
      justify-content: center;
    }

    .name-text {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-weight: bold;
    }

    #dog-div {
      display: flex;
      flex-flow: column;
      justify-content: center;
      align-items: center;
      align-content: center;
      width: 200px;
      overflow: auto;
    }
    #dog-div::before {
        content: " ";
        border: solid 5px white;
        border-right: 0px;
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: .4em;
        right: 0;
    }
    #dog-div::after {
      content: " ";
      border: solid 5px white;
      border-left: 0px;
      position: absolute;
      right: 0;
      top: 0;
      bottom: 0;
      width: .4em;
      right: 0;
    }
    #dog-div.left {
      position: absolute;
      top: 00px;
      left: 300px;
    }
    #dog-div.right {
      position: absolute;
      top: 00px;
      left: 800px;
    }
    #dog-div img {
      height: 100px;
      margin: 10px 0px 10px 0px;
    }
  </style>
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section class='center'>
        <h1>{sarcasm}</h1>
        <img src='assets/img/saracasm_hex.png' style='margin-top: -30px; margin-bottom: 0px; width: 300px;'>
      </section>
      <section class='center'>
        <pre><code class='R hljs' data-trim>
          > sarcastic("sample text")

          [1] sAmPle teXT
        </code></pre>
        <div class='fragment'>
          <p style='font-size: 40%; position: absolute; top: 250px; left: 100px;'>Uhhhhhhh....</p>
          <p style='font-size: 40%; position: absolute; top: 300px; right: 300px;'>They let this guy talk?</p>
          <p style='font-size: 40%; position: absolute; top: 250px; right: 200px;'>Is that it?</p>
        </div>
        <aside class='notes'>
          <h2>I know what you're thinking</h2>
          <h1>Where does this format come from?</h1>
        </aside>
      </section>
      <section>
        <img src='./assets/img/mocking-spongebob.jpg'>
        <div class='fragment'>
          <img src='./assets/img/kristenbell.webp' style='position: absolute; top: 50%; right: -5%; transform: scale(0.3);'>
        </div>
        <aside class='notes'>
          <h1>DON'T READ THE MEME PLEASE</h1>
          <h2>Yep that meme</h2>
          <h2>(did this guy just show us spongebob memes?)</h2>
        </aside>
      </section>
      <section class='center'>
        <iframe width=500px height=300px src="https://trends.google.com:443/trends/embed/explore/TIMESERIES?req=%7B%22comparisonItem%22%3A%5B%7B%22keyword%22%3A%22%5C%22mocking%20spongebob%5C%22%22%2C%22geo%22%3A%22%22%2C%22time%22%3A%22today%2012-m%22%7D%5D%2C%22category%22%3A0%2C%22property%22%3A%22%22%7D&tz=300&eq=date%3Dtoday%252012-m%26q%3D%2522mocking%2520spongebob%2522"></iframe>
        <aside class='notes'>
          <h2>Spongebob meme on its way out</h2>
        </aside>
      </section>
      <section class='center'>
        <div style='display: flex; flex-direction: row; justify-content: space-around; align-items: center'>
          <div style='display: inline-block; margin: 10px; padding: 20px'>
            <h1>Intra-<span class='fragment'>word</span></h1>
            <h1 class='fragment'>randomized</h1>
            <h1 class='fragment'>casing</h1>
          </div>
          <div class='fragment' style="display: inline-block; margin: 10px; padding: 20px">
            <h2>=</h2>
          </div>
          <div style='display: inline-block; margin: 10px; padding: 20px'>
            <h2 class='fragment'>"Ridicule"</h2>
            <h2 class='fragment'>"Mockery"</h2>
          </div>
        </div>
        <aside class='notes'>
          <h2>Particular format persists</h2>
          <h2>Internet adopted intraword randomized casing as a way to express ridicule</h2>
          <h2>Gen-Z -- created a new mode of expression -- rich, albeit niche application</h2>
        </aside>
      </section>
      <section class='center' data-transition="slide-in none">
        <h1>{mocker}</h1>
        <div id="whale-box" class='fragment'>
          <img id='docker-whale' src='assets/img/docker.png'>
        </div>
        <aside class='notes'>
          <h1>Should've named it mocker</h1>
        </aside>
      </section>
      <section class='center'>
        <blockquote>"That's because I'm SUCH a thoughtful person"</blockquote>
        <div class='fragment'>
          <p>‚Üë</p>
          <p>sarcasm</p>
        </div>
      </section>
      <section class = 'center' data-background-image='assets/img/cp11-hester.png' data-background-transition="none">
          <aside class='notes'>
            <h2>How about Jim Hester's talk this morning</h2>
            <h1> THANKS FOR ODBC </h1>
            <h2>What a treat --</h2>
          </aside>
      </section>
      <section class='center' data-background-image='assets/img/cp11-hester.png' data-background-transition="none">
        <section>
          <img
            src="https://i.cdn.turner.com/money/galleries/2007/news/0710/gallery.luxury_expensive_food/images/serendipity_dessert.jpg">
          <aside class='notes'>
            <h3>If we compare their work to dessert</h3>
            <ul>
              <li>High-quality</li>
              <li>Really interesting</li>
              <li>Creative</li>
              <li>Bill for time probably expensive</li>
            </ul>
          </aside>
        </section>
        <section data-background-transition='none'>
          <img
            src="https://asset-americas.unileversolutions.com/content/dam/unilever/heart/united_states_of_america/online_comms_/product_enhanced_page/ice_cream/all/1209350_strawberry_shortcake_product_packshot-1243123-png.png.ulenscale.600x600.png">
          <aside class='notes'>
            <h3>What you're going to hear today more like novelty ice cream</h3>
            <ul>
              <li>Juvenile</li>
              <li>Not most groundbreaking</li>
              <li>Fun (hopefully)</li>
            </ul>
            <h2>Go ahead, relax, turn off brain</h2>
          </aside>
        </section>
      </section>
      <section style="text-align: left;" data-background-transition='none'> <!--OUTLINE-->
        <h2>Something for everyone</h2>
        <ul>
          <li>
            Beginner:
            <ul style='font-size: 70%;'>
              <li>Functionals: <code>lapply</code></li>
            </ul>
          </li>
          <li>
            Intermediate:
            <ul style='font-size: 70%;'>
              <li>Error handling</li>
            </ul>
          </li>
          <li>
            Int.-Adv.:
            <ul style='font-size: 70%;'>
              <li>Python package integration</li>
            </ul>
          </li>
        </ul>
      </section>
      <section class='center'>
        <h3 style='margin-bottom: 10%;'>Objective</h3>
        <pre><code class='R hljs' data-trim>
          > sarcastic("sample text")

          [1] sAmPle teXT
        </code></pre>
      </section>
      <section class='center' style='text-align: left;'>
        <code class='headline'>Functionals</code>
      </section>
      <section> <!--lapply section-->
        <section >
          <blockquote style='margin-top: 150px; margin-bottom: 50px;'>Functions that accept a function as an argument, and return a vector as output</blockquote>
          <p><code>lapply</code></p>
        </section>
        <section style='text-align: left;'>
          <code>lapply</code>
          <p>Function "<code>b</code>"</p>
          <div style='position: relative; top: 100px; height: 500px'>
            <h1 style='position: relative; top: 50px;margin-bottom: 15%;'>
              <code>üêù(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</code> =
            </h1>
            <img class='fragment' src='./assets/img/golden.webp' style='
            position: absolute;
            object-fit: cover;
            top: -20px;
            left: 220px;
            height: 240px;
            width: 240px;'>
            <img class='fragment' src='./assets/img/golden-bit.jpg' style='
            position: absolute;
            top: -20px;
            left: 820px;
            height: 240px;
            '>
          </div>
        </section>
        <section style='text-align: left;'>
          <code>lapply</code>
          <div style='position: relative; top: 100px;'>
            <h2 style='position: relative; top: 200px'>
              <code>lapply(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, üêù)</code> =
            </h2>
          <div id='dog-div' class='left fragment'>
              <img src='./assets/img/golden.webp'>
              <img src='./assets/img/dachshund.jpg'>
              <img src='./assets/img/black-dog.jpg'>
              <img src='./assets/img/beagle.jpg'>
          </div>
          <div id='dog-div' class='right fragment'>
              <img src='./assets/img/golden-bit.jpg'>
              <img src='./assets/img/dachshund-bit.jpg'>
              <img src='./assets/img/black-dog-bit.png'>
              <img src='./assets/img/beagle-bit.jpg'>
          </div>
          </div>
        </section>
        <section style='text-align: left;' data-transition="slide-in none">
          <p class='headline'><code>R: lapply</code></p>
          <pre><code class='r hljs' data-trim data-line-numbers="2|3|4|5|7">
            sarcastic = function(text) {
                letters = strsplit(text, split = '')
                lEtTeRs = lapply(letters, FUN = function(each_vec_element){
                    vec = lapply(each_vec_element, function(each_letter) {
                        return(randcase()(each_letter))
                    })
                    return(paste0(vec, collapse = ''))
                })
                if (length(lEtTeRs) == 1) {
                    return(lEtTeRs[[1]])
                } else {
                    return(as.character(lEtTeRs))
                }
            }
            </code></pre>
        </section>
        <section style='text-align: left;'>
          <code>Python: List comprehension</code>
          <pre><code class='python hljs' data-trim data-line-numbers="1|2|3|4">
            text_split = split_characters(text)
            sarcastic_text = [''.join(
                    [randcase(char) for char in word]
                  ) for word in text_split]
            return(sarcastic_text)
          </code></pre>
          <img src='assets/img/pysnark.png' class='fragment' style='position:absolute; left: 50%; top: 150%; transform: translate(-50%, -50%); margin-right: -50%;'>
        </section>
        <section style='text-align: left;'>
          <div class='boobox'>
            <code>Javascript: <span class='hljs-keyword'>for</span> loop</code>
            <img class='boo' style="position: absolute; left: 10%; top: 100%"
              src='http://vignette1.wikia.nocookie.net/brutalmario/images/7/7c/Boo.png/revision/latest?cb=20150617073957'>
            <img class='boo' style="position: absolute; left: 100%;"
              src='http://vignette1.wikia.nocookie.net/brutalmario/images/7/7c/Boo.png/revision/latest?cb=20150617073957'>
            <img class='boo' style="position: absolute; left: -10%; bottom: 20%;"
              src='http://vignette1.wikia.nocookie.net/brutalmario/images/7/7c/Boo.png/revision/latest?cb=20150617073957'>
          </div>
            <pre><code class='js hljs' data-trim>
                        textTransform = function (text) {
                        let result = '';

                        for (let letter of text) {
                          test = Math.round(Math.random())
                          if (test === 1) {
                            letter = letter.toUpperCase()
                            result += letter
                          } else {
                            letter = letter.toLowerCase()
                            result += letter
                          }
                        }
                          return result
                        }
            </code></pre>
          <aside class='notes'>
            <h2>Now we have a function that will randomly capitalize letters in a sentence.</h2>
            <h2>Easy enough</h2>
            <h1>PICK A SIMPLE OBJECTIVE</h1>
            <h2>you can take the problem with you.</h2>
          </aside>
        </section>
      </section>
      <section class='center' style='text-align: left;'>
        <code class='headline'>Error handling</code>
      </section>
      <section> <!--Error handling section-->
        <section data-markdown data-auto-animate data-auto-animate-duration=0.5 >
          <script type='text/template'>
            ## Options

            * `NULL` (default)
            * `recover`
            * `browser`
            * `traceback`
            * Something else ... ? <!-- .element: class="fragment" data-fragment-index="2" -->

            ```R <!-- .element: data-id='optserr'-->
            # Set special error handling behavior
            options(error = recover)
            ```
          </script>
        </section>
        <section data-transition="slide-in fade-out" data-auto-animate data-auto-animate-duration=0.5>
          <pre><code data-id='optserr' class='R hljs' data-trim>
            # Set special error handling behavior
            options(error = recover)
          </code></pre>
          <pre class='fragment'><code class="R hljs" data-trim>
            > recover

            function () {
              if (.isMethodsDispatchOn()) {
                tState <- tracingState(FALSE)
                on.exit(tracingState(tState))
              }
              calls <- sys.calls()
              from <- 0L
              ...
            } </code></pre>
          <pre class = 'fragment'><code class="R hljs" data-trim>
            options(show.error.messages = FALSE)
          </code></pre>
        </section>
        <section class="center" data-transition="fade-in slide-out">
          <p class="r-fit-text">ü§î</p>
        </section>
        <section class='center' style='text-align: left;'>
          <code class='headline'>Pranks</code>
          <iframe id='rpranks-site' width='100%' height='600vh' src="http://minimallysufficient.github.io/r/humor/2016/08/25/r-pranks.html"></iframe>
        </section>
        <section style='text-align: left;'>
          <code class='headline'>evil.R |></code>
          <code >Romain Francois</code>
          <pre><code class="R hljs" data-trim>
            # no information in error messages, just a shruggy
            unlockBinding("stop", baseenv() )
            assign("stop",
              local({
                function (..., call. = TRUE, domain = NULL) {
                  .Internal(stop(FALSE, "\n\t¬Ø\\_(„ÉÑ)_/¬Ø\n"))
                }
              }),
              pos = baseenv()
            )
          </code></pre>
          <pre><code class="text hljs errcode" data-trim>
            Error: ¬Ø\_(„ÉÑ)_/¬Ø
          </code></pre>
        </section>
        <section class='center'>
          <h1>{praise}</h1>
        </section>
        <section>
          <p class='headline'><code>{praise} |> G√°bor Cs√°rdi</code></p>
          <pre><code class="R hljs" data-trim>
            > praise::praise("You are a ${adjective} student!")

            [1] "You are a marvelous student!"
          </code></pre>
          <pre class='fragment'><code class="R hljs" data-trim>
              > praise::praise("${exclamation}, ${creating} this ${rpackage} must have been tough!")
          </code></pre>
          <pre class='fragment'><code class="R hljs" data-trim>
            [1] "hooray, making this software must have been tough!"
          </code></pre>
        </section>
        <section class='center'>
          <h1 id="year2020" style='display: inline-block'>2020</h1>
          <aside class='notes'>
            <h1>This is 2020</h1>
            <h1>We don't deserve nice things</h1>
          </aside>
        </section>
        <section class='center' style='text-align: left;'>
          <code class='headline'>Demoralizing errors</code>
          <aside class='notes'>
            <h1>SHOW DEMO!!!!!</h1>
          </aside>
        </section>
        <section style='text-align: left;'>
          <code class='headline'>Demoralizing errors</code>
          <pre style='font-size: 40%;'><code data-trim class='r hljs' data-line-numbers="|11|7|8|9">
            demoralizing_errors = function(silent = FALSE) {
              dem_error = function() {
                  ridicule_proc = getOption('ridicule_probability')
                  if (is.null(ridicule_proc)) ridicule_proc = 0.1
                  err = gsub(pattern = '\\n(?!.*\\n)',
                              replacement = '. ',
                              x = geterrmessage(), perl = TRUE)
                  message(err, appendLF = FALSE)
                  message(ridicule(proc = ridicule_proc))
              }
              options(show.error.messages = FALSE, error = dem_error)
          }
          </code></pre>
        </section>
        <section style='text-align: left;'>
          <code class='headline'>Ridicule</code>
          <pre style='font-size: 40%;'><code data-trim class='r hljs' data-line-numbers="|11|12|13|14">
            ridicule = function(hurt = NULL, proc = 0.1) {
              n = 6
              if (is.null(hurt)) {
                  hurt = as.character(sample(seq(0,5), size = 1, prob = c(1-proc, rep(proc/(n-1), (n-1)))))
              } else {
                  hurt = as.character(sample(c(0,hurt), size = 1, prob = c(1-proc, proc)))
              }
              switch(hurt,
                    '0' = invisible(NULL),
                    '1' = praise("${adjective}, your computer remarked, in annoyance."),
                    '2' = sarcastic(praise("${adjective}.")),
                    '3' = sarcastic(praise("That was ${adjective}.")),
                    '4' = sarcastic(praise("${exclamation}${exclamation} that was ${adverb} ${adjective}.")),
                    '5' = sarcastic(praise("${exclamation} ${exclamation} ${exclamation} you're a ${adjective} coder."))
                    )
          }

          </code></pre>
        </section>
        <section style="text-align: left;">
          <p style="margin-bottom: 0px;"><code>Demoralizing errors</code></p>
          <p style="margin-top: -10px; margin-bottom: 80px;"><code style="font-size: 70%;">Prank your friends</code></p>
          <ol>
            <li>
              Download <code>{sarcasm}</code>
                <pre style="font-size: 40%;"><code class="R hljs">remotes::install_github("https://github.com/awong234/sarcasm")</code></li>
            </li>
            <li>
              Insert the following into their <code>.Rprofile</code>
            </li>
            <pre><code data-trim class="R hljs">
              options('ridicule_probability' = 0.01)
              sarcasm::demoralizing_errors(silent = TRUE)
            </code></pre>
            <li>
              Wait!
            </li>
          </ol>
        </section>
      </section>
      <section> <!--Python section-->
        <section class='center'>
          <h2>Python & <code>{reticulate}</code></h2>
        </section>
        <section style='text-align: left;'>
          <div style="display: flex; flex-direction: column; justify-content: space-between;">
            <div style="display: inline-block;">
              <code class='headline'>Python in an R Package</code>
            </div>
            <div style="display: inline-block;">
              <img src='assets/img/pysnark.png'>
              <h3>Tips</h3>
              <ul style='font-size: 80%;'>
                <li class = 'fragment'>Put your scripts | module in the <code class='pop'>inst/</code> directory</li>
                <li class = 'fragment'>Use <code class='pop'>system.file(package='package_name',&nbsp;'path')</code> to reference subdirs of the <code>inst/</code> directory</li>
                <li class = 'fragment'>Use <code  class='pop'>reticulate::import_from_path()</code> along with <code>system.file</code> to use your python scripts in an R session</li>
              </ul>
            </div>
          </div>
          <aside class='notes'>
            <h1>DEMO R MARKDOWN</h1>
            <h1>SHOW PYTHON MODULE</h1>
          </aside>
        </section>
      </section>
      <section class='center'>
        <h1>Thank you!</h1>
        <p><a href="mailto:aw685@cornell.edu">aw685@cornell.edu</a></p>
        <hr style='width: 200px; height: 1px; border: none; background-color: rgb(146, 146, 146);'>
        <p style='font-size: 70%;'><a href='https://github.com/awong234/sarcasm-pres'>https://github.com/awong234/sarcasm-pres</a></p>
        <p style='font-size: 70%;'><a href="https://www.alecsalces.com/presentations/sarcasm_pres">https://www.alecsalces.com/presentations/sarcasm_pres</a></p>
        <hr style='width: 200px; height: 1px; border: none; background-color: rgb(146, 146, 146);'>
        <div style='font-size: 50%;'>
          <p>Additional thanks to:</p>
          <ul>
            <li>Hakim El Hattab et al. <code>|></code> <a href="https://revealjs.com/">reveal.js</a></li>
          </ul>
        </div>

      </section>
    </div> <!-- END PRESENTATION -->
  </div>
  <script>
    Reveal.initialize({
      plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      hash: true,
      slideNumber: true,
      center: false,
      transition: 'slide',
      transitionSpeed: 'fast'
    });

    textTransform = function (text) {
      let result = '';

      for (let letter of text) {
        test = Math.round(Math.random())
        if (test === 1) {
          letter = letter.toUpperCase()
          result += letter
        } else {
          letter = letter.toLowerCase()
          result += letter
        }
      }
      return result
    };

    $(document).ready(function () {

      // Handle booboxes & text casing randomization
      $(".boobox").mouseenter(function () {
        $("img").attr('src', './assets/img/booleft.gif')
      });
      $(".boobox").mouseleave(function () {
        $("img").attr('src', './assets/img/boo.png')
      });
      $(".boobox p, .boobox code").mouseenter(function () {
        $(this).data('defaultText', $(this).text())
        $(this).text(textTransform($(this).text()))
      });
      $(".boobox p, .boobox code").mouseleave(function () {
        $(this).text($(this).data("defaultText"))
      })

      //Handle name overlay
      $('.personnel-image').mouseenter(function() {
        $(this).css("opacity", "0.2")
        console.log('Add text')
        $(this).parent().append(`<p class='name-text'>${$(this).attr('name')}</p>`)
      })
      $('.personnel-image').mouseleave(function() {
        $(this).css("opacity", "1")
        console.log('Remove text')
        $(this).parent().find("p").remove()
      })

      // Handle docker whale rotation
      $('#whale-box').click(function() {
        $("#docker-whale").animate(
        {deg: 180}, {
          duration: 500,
          step: function(now) {
            $(this).css("transform", `rotate(${now}deg`)
          },
          complete: function() {
            function randn_bm() {
              var u = 0, v = 0;
              while (u === 0) u = Math.random(); //Converting [0,1) to (0,1)
              while (v === 0) v = Math.random();
              return Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
            }
            $(this).attr("src", "assets/img/whale_no_blocks.png").css("transform", "rotate(180deg)")
            for (i=1; i<10; i++) {
              $("#whale-box")
                .append(`<img id='block-${i}'src='assets/img/block.png'>`)
            }
            $("#block-1")
              .css('position', 'absolute')
              .css('bottom', '163px')
              .css("right", "337px")
              .animate({ deg: 360, top: randn_bm() * 5 + 1000 }, { duration: randn_bm() * 5 + 1000, step: function (now) { $(this).css("transform", `rotate(${now / 2}deg`).css("transform", `translate(0, ${now})`) } })
            $("#block-2")
              .css('position', 'absolute')
              .css('bottom', '163px')
              .css("right", "378px")
              .animate({ deg: 360, top: randn_bm() * 5 + 1000 }, { duration: randn_bm() * 5 + 1000, step: function (now) { $(this).css("transform", `rotate(${now/2}deg`).css("transform", `translate(0, ${now})`) } })
            $("#block-3")
              .css('position', 'absolute')
              .css('bottom', '163px')
              .css("right", "419px")
              .animate({ deg: 360, top: randn_bm() * 5 + 1000 }, { duration: randn_bm() * 5 + 1000, step: function (now) { $(this).css("transform", `rotate(${now/2}deg`) } })
            $("#block-4")
              .css('position', 'absolute')
              .css('bottom', '163px')
              .css("right", "460px")
              .animate({ deg: 360, top: randn_bm() * 5 + 1000 }, { duration: randn_bm() * 5 + 1000, step: function (now) { $(this).css("transform", `rotate(${now/2}deg`) } })
            $("#block-5")
              .css('position', 'absolute')
              .css('bottom', '163px')
              .css("right", "501px")
              .animate({ deg: 360, top: randn_bm() * 5 + 1000 }, { duration: randn_bm() * 5 + 1000, step: function (now) { $(this).css("transform", `rotate(${now/2}deg`) } })
            $("#block-6")
              .css('position', 'absolute')
              .css('bottom', '124px')
              .css("right", "460px")
              .animate({ deg: 360, top: randn_bm() * 5 + 1000 }, { duration: randn_bm() * 5 + 1000, step: function (now) { $(this).css("transform", `rotate(${now/2}deg`) } })
            $("#block-7")
              .css('position', 'absolute')
              .css('bottom', '124px')
              .css("right", "419px")
              .animate({ deg: 360, top: randn_bm() * 5 + 1000 }, { duration: randn_bm() * 5 + 1000, step: function (now) { $(this).css("transform", `rotate(${now/2}deg`) } })
            $("#block-8")
              .css('position', 'absolute')
              .css('bottom', '124px')
              .css("right", "378px")
              .animate({ deg: 360, top: randn_bm() * 5 + 1000 }, { duration: randn_bm() * 5 + 1000, step: function (now) { $(this).css("transform", `rotate(${now/2}deg`) } })
            $("#block-9")
              .css('position', 'absolute')
              .css('bottom', '85px')
              .css("right", "460px")
              .animate({ deg: 360, top: randn_bm() * 5 + 1000 }, { duration: randn_bm() * 5 + 1000, step: function (now) { $(this).css("transform", `rotate(${now/2}deg`) } })
          }
        }
      );
      });
    });

  </script>
</body>
